class BentoGrid{constructor(){this.initializeCarousels();this.initializeEventListeners()}
initializeCarousels(){document.querySelectorAll('.bento-item.featured').forEach(featuredItem=>{this.setupCarousel(featuredItem)})}
setupCarousel(featuredItem){const container=featuredItem.querySelector('.carousel-container');const slides=container.querySelectorAll('.carousel-slide');const dotsContainer=container.querySelector('.carousel-dots');let currentSlide=0;if(dotsContainer){dotsContainer.innerHTML=''}
slides.forEach((_,index)=>{const dot=document.createElement('div');dot.classList.add('dot');if(index===0)dot.classList.add('active');dot.addEventListener('click',()=>this.goToSlide(featuredItem,index));dotsContainer.appendChild(dot)});const intervalId=setInterval(()=>{this.nextSlide(featuredItem)},5000);featuredItem.dataset.intervalId=intervalId;featuredItem.addEventListener('mouseenter',()=>{clearInterval(intervalId)});featuredItem.addEventListener('mouseleave',()=>{clearInterval(intervalId);featuredItem.dataset.intervalId=setInterval(()=>{this.nextSlide(featuredItem)},5000)})}
goToSlide(featuredItem,n){const container=featuredItem.querySelector('.carousel-container');const slides=container.querySelectorAll('.carousel-slide');const dots=container.querySelectorAll('.dot');slides.forEach(slide=>slide.classList.remove('active'));dots.forEach(dot=>dot.classList.remove('active'));slides[n].classList.add('active');if(dots[n])dots[n].classList.add('active');}
nextSlide(featuredItem){const container=featuredItem.querySelector('.carousel-container');const slides=container.querySelectorAll('.carousel-slide');const currentSlide=container.querySelector('.carousel-slide.active');const currentIndex=Array.from(slides).indexOf(currentSlide);const nextIndex=(currentIndex+1)%slides.length;this.goToSlide(featuredItem,nextIndex)}
initializeEventListeners(){document.querySelectorAll('.bento-item').forEach(item=>{item.addEventListener('click',(e)=>{if(!e.target.classList.contains('dot')){this.handleItemClick(item)}})})}
handleItemClick(item){const title=item.querySelector('h3, .carousel-content h2');const tag=item.querySelector('.article-tag');console.log('Bento item clicked:',{title:title?title.textContent:'Untitled',tag:tag?tag.textContent:'No tag',element:item});const event=new CustomEvent('bento-item-click',{detail:{item},bubbles:!0});item.dispatchEvent(event)}
createGrid(containerId,options={}){const container=document.getElementById(containerId);if(!container)return;const{columns='auto-fit',minWidth='300px',gap='20px',autoRows='280px',layout='default'}=options;container.classList.add('bento-grid');container.style.gridTemplateColumns=`repeat(${columns}, minmax(${minWidth}, 1fr))`;container.style.gap=gap;container.style.gridAutoRows=autoRows;if(layout!=='default'){container.classList.add(layout)}
this.initializeCarousels();this.initializeEventListeners()}
addGridItem(containerId,item){const container=document.getElementById(containerId);if(!container)return;const bentoItem=document.createElement('div');bentoItem.classList.add('bento-item');bentoItem.innerHTML=item;container.appendChild(bentoItem);if(bentoItem.classList.contains('featured')&&bentoItem.querySelector('.carousel-container')){this.setupCarousel(bentoItem)}
this.initializeEventListeners()}
setItemSize(item,cols=1,rows=1){if(cols>1)item.classList.add(`span-${cols}`);if(rows>1)item.classList.add(`row-${rows}`);}
destroy(){document.querySelectorAll('.bento-item.featured').forEach(item=>{if(item.dataset.intervalId){clearInterval(parseInt(item.dataset.intervalId))}})}}
document.addEventListener('DOMContentLoaded',()=>{window.bentoGrid=new BentoGrid()});if(typeof module!=='undefined'&&module.exports){module.exports=BentoGrid}